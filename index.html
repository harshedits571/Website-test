<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Software Hub - The Definitive Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --glow-color-blue: hsl(230, 100%, 60%); --glow-color-red: hsl(0, 100%, 50%); }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #000005;
            color: #e5e7eb;
            overflow: hidden;
            min-height: 100vh;
            cursor: default;
        }

        .font-orbitron { font-family: 'Orbitron', sans-serif; }

        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 300; background: #000005;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 1s ease-out;
        }
        #loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-left-color: #6366f1;
            border-radius: 50%; width: 60px; height: 60px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        #landing-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; z-index: 200; background-color: #000005;
            transition: opacity 1.5s cubic-bezier(0.4, 0, 0.2, 1); cursor: pointer;
        }
        #landing-screen.hidden { opacity: 0; pointer-events: none; }
        
        #landing-title {
            position: relative; font-weight: 900;
            animation: fadeInDown 1s ease-out 0.5s both;
            text-shadow: 0 0 15px var(--glow-color-blue), 0 0 30px var(--glow-color-blue); color: #f0f0f5;
        }

        #landing-title::before, #landing-title::after {
            content: attr(data-text); position: absolute; top: 0; left: 0;
            width: 100%; height: 100%; background: #000005;
            overflow: hidden; clip-path: inset(50% 0 50% 0);
        }

        #landing-title::before { left: -2px; text-shadow: 2px 0 var(--glow-color-red); animation: glitch-anim-1 3s infinite linear alternate-reverse; }
        #landing-title::after { left: 2px; text-shadow: -2px 0 var(--glow-color-blue); animation: glitch-anim-2 2.5s infinite linear alternate-reverse; }
        
        @keyframes glitch-anim-1 { 0% { clip-path: inset(46% 0 25% 0); } 25% { clip-path: inset(14% 0 75% 0); } 50% { clip-path: inset(80% 0 10% 0); } 75% { clip-path: inset(30% 0 45% 0); } 100% { clip-path: inset(5% 0 90% 0); } }
        @keyframes glitch-anim-2 { 0% { clip-path: inset(82% 0 12% 0); } 25% { clip-path: inset(22% 0 42% 0); } 50% { clip-path: inset(62% 0 32% 0); } 75% { clip-path: inset(2% 0 88% 0); } 100% { clip-path: inset(92% 0 2% 0); } }

        #landing-subtitle { animation: fadeInUp 1s ease-out 1s both; }

        #enter-orb {
            width: 160px; height: 160px; border-radius: 50%; display: flex;
            justify-content: center; align-items: center; position: relative;
            margin-top: 2.5rem; transition: transform 0.4s ease-in-out, box-shadow 0.4s ease;
            animation: float 4s ease-in-out infinite, fadeInUp 1s ease-out 1.5s both;
            box-shadow: 0 0 20px 0px rgba(79, 70, 229, 0.5), inset 0 0 20px 0px rgba(79, 70, 229, 0.3);
            border: 2px solid rgba(129, 140, 248, 0.5);
            background: radial-gradient(circle, rgba(20, 15, 70, 0.5) 0%, rgba(10, 10, 20, 0.8) 70%); backdrop-filter: blur(5px);
        }
        #enter-orb:hover { transform: scale(1.1); box-shadow: 0 0 35px 5px rgba(79, 70, 229, 0.7), inset 0 0 30px 0px rgba(79, 70, 229, 0.5); }
        #enter-orb::before, #enter-orb::after {
            content: ''; position: absolute; width: 100%; height: 100%; border-radius: 50%;
            border: 2px solid transparent; animation: pulse 3s infinite ease-out;
        }
        #enter-orb::before { border-top-color: rgba(167, 139, 250, 0.8); }
        #enter-orb::after { animation-delay: 1.5s; border-left-color: rgba(99, 102, 241, 0.8); }
        #enter-orb span { font-weight: 600; font-size: 1.2rem; color: #fff; text-shadow: 0 0 10px rgba(255, 255, 255, 0.9); animation: textPulse 3s infinite ease-in-out; }
        
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        @keyframes pulse { 0% { transform: rotate(0deg) scale(1); opacity: 1; } 50% { transform: rotate(180deg) scale(1.4); opacity: 0.5; } 100% { transform: rotate(360deg) scale(1); opacity: 1; } }
        @keyframes textPulse { 0%, 100% { opacity: 0.8; } 50% { opacity: 1; } }

        #galaxy-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; visibility: hidden; transition: opacity 1s ease-out; }
        #galaxy-container.visible { opacity: 1; visibility: visible; }
        
        #galaxy-canvas { display: block; width: 100%; height: 100%; cursor: grab; }
        #galaxy-canvas:grabbing { cursor: grabbing; }

        .label {
            color: #fff; font-size: 14px; text-shadow: 0 0 5px #000;
            padding: 4px 8px; background: rgba(0,0,0,0.6); border-radius: 4px;
            pointer-events: none; user-select: none; transform: translate(-50%, 0);
            transition: opacity 0.2s;
        }
        
        #hud-reticle {
            position: fixed; width: 100px; height: 100px;
            border: 2px solid rgba(107, 114, 128, 0.5); border-radius: 50%;
            pointer-events: none; opacity: 0; transition: all 0.2s ease-out;
            box-shadow: 0 0 15px rgba(107, 114, 128, 0.3);
            transform: translate(-50%, -50%) scale(1.2);
        }
        #hud-reticle.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        #hud-reticle-name {
            position: absolute; bottom: -30px; left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7); padding: 4px 10px; border-radius: 4px;
            font-size: 14px; white-space: nowrap;
        }

        #detail-modal {
            position: fixed; bottom: -100%; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 800px;
            background: rgba(10, 10, 25, 0.8); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border-top: 2px solid rgba(79, 70, 229, 0.8);
            box-shadow: 0 -10px 40px rgba(79, 70, 229, 0.3);
            border-radius: 1.5rem 1.5rem 0 0;
            z-index: 1000; padding: 2rem;
            transition: bottom 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        #detail-modal.visible { bottom: 0; }
        .gradient-btn { background-image: linear-gradient(to right, #4f46e5, #7c3aed, #a855f7); background-size: 200% auto; transition: all 0.3s ease; }
        .gradient-btn:hover { background-position: right center; transform: scale(1.05); }

        #galaxy-nav {
            position: fixed; bottom: 1.5rem; left: 50%; transform: translateX(-50%);
            display: flex; gap: 0.5rem; background: rgba(10, 10, 25, 0.7); backdrop-filter: blur(10px);
            padding: 0.75rem; border-radius: 9999px; border: 1px solid rgba(255, 255, 255, 0.1); z-index: 50;
        }
        .nav-btn {
            padding: 0.5rem 1.25rem; font-weight: 600; border-radius: 9999px; cursor: pointer;
            transition: all 0.3s; background: transparent; color: #9ca3af; border: 1px solid transparent;
        }
        .nav-btn:hover { color: #fff; background: rgba(255, 255, 255, 0.1); }
        .nav-btn.active { color: #fff; background: #4f46e5; box-shadow: 0 0 20px rgba(79, 70, 229, 0.7); }
        .nav-btn[disabled] { cursor: not-allowed; opacity: 0.5; }

        #stardate-clock {
            position: fixed; top: 1.5rem; right: 1.5rem; text-align: right; z-index: 50;
            background: rgba(0,0,0,0.5); padding: 0.5rem 1rem; border-radius: 8px;
        }
        #stardate-clock .time { font-family: 'Orbitron', sans-serif; font-size: 1.5rem; letter-spacing: 2px; }
        #stardate-clock .date { font-size: 0.8rem; color: #9ca3af; }
    </style>
</head>
<body>
    <div id="loading-screen">
        <div id="loading-spinner"></div>
        <p class="mt-4 font-semibold text-lg">Calibrating Galactic Atlas...</p>
    </div>

    <div id="landing-screen">
        <h1 id="landing-title" class="text-4xl sm:text-6xl md:text-8xl font-black tracking-tighter" data-text="Software Hub">Software Hub</h1>
        <p id="landing-subtitle" class="text-md md:text-lg text-gray-400 max-w-xl mt-4">An immersive universe of editing resources. Click the orb to engage.</p>
        <div id="enter-orb" role="button" aria-label="Enter the Software Hub"><span>Engage</span></div>
    </div>

    <div id="galaxy-container">
        <canvas id="galaxy-canvas"></canvas>
    </div>
    
    <div id="hud-reticle"><div id="hud-reticle-name"></div></div>

    <nav id="galaxy-nav">
        <button class="nav-btn active" data-galaxy="software">Software</button>
        <button class="nav-btn" data-galaxy="plugins">Plugins</button>
        <button class="nav-btn" data-galaxy="scripts">Scripts</button>
        <button class="nav-btn" data-galaxy="utilities">Utilities</button>
    </nav>
    
    <div id="stardate-clock">
        <div id="stardate-time" class="time"></div>
        <div id="stardate-date" class="date"></div>
    </div>

    <div id="detail-modal">
        <button id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors">
            <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
        <div id="modal-content"></div>
    </div>

    <script type="importmap">
    { "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.128.0/examples/jsm/"
    } }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { CSS2DRenderer, CSS2DObject } from 'three/addons/renderers/CSS2DRenderer.js';

        // --- DEFINITIVE, AUDITED DATABASE ---
        const DB = {
            software: [
                { id: 'after-effects', name: 'After Effects', desc: 'Motion graphics and visual effects', img: 'https://upload.wikimedia.org/wikipedia/commons/c/cb/Adobe_After_Effects_CC_icon.svg', versions: [{ name: '2025', url: 'https://drive.google.com/file/d/1QF0AHW52ZDpfHqLLIZ4hUSqHHy0Q30ZQ/view?usp=sharing' }, { name: '2024', url: 'https://drive.google.com/file/d/11hAL0WdA77ewKd4iJeGDi1AzViUTtlEM/view?usp=sharing' }, { name: '2023', url: 'https://drive.google.com/file/d/1g_T3o5tcNprBua8jSWqcRe9egwlmCmFU/view?usp=sharing' }, { name: '2022', url: 'https://drive.google.com/file/d/1YRtN-isE8B2c-f2QAW3UniccgLNOSg0n/view?usp=sharing' }, { name: '2021', url: 'https://drive.google.com/file/d/1ZHq06y_CFQtLDTch9GpHt5IwEnWCtGDC/view?usp=sharing' }, { name: '2020', url: 'https://drive.google.com/file/d/1bKed59m-y5ZZI6-4IlEgJBzdGN1C5Rxj/view?usp=sharing' }] },
                { id: 'premiere-pro', name: 'Premiere Pro', desc: 'Professional video editing', img: 'https://upload.wikimedia.org/wikipedia/commons/4/40/Adobe_Premiere_Pro_CC_icon.svg', versions: [{ name: '2025', url: 'https://drive.google.com/file/d/1s2IqZevh2S6oJrVbG3IlZxdUSdfLqT5M/view?usp=sharing' }, { name: '2024', url: 'https://drive.google.com/file/d/1dYcPG8pQHgweVzqbsHWFUeDM51XOhoj-/view?usp=sharing' }, { name: '2023', url: 'https://drive.google.com/file/d/1slPjxo2WmqvJNWMiAi-s70sQABO3AHMN/view?usp=sharing' }, { name: '2022', url: 'https://drive.google.com/file/d/1O3acpw62IVR5oFeMKezpMwjw7rhYv2i-/view?usp=sharing' }, { name: '2021', url: 'https://drive.google.com/file/d/1F_mHHuBdUMcHyWxB03hECKKhCG2sQYYL/view?usp=sharing' }, { name: '2020', url: 'https://drive.google.com/file/d/1xOUNF2XW4YvhmB6qUsW-Yt-_N_kESc5i/view?usp=sharing' }] },
                { id: 'photoshop', name: 'Photoshop', desc: 'Image editing and graphic design', img: 'https://upload.wikimedia.org/wikipedia/commons/a/af/Adobe_Photoshop_CC_icon.svg', versions: [{ name: '2025', url: 'https://drive.google.com/file/d/1klaoh8IR0YvGJlaxqsbattIaG85Ep0Pw/view?usp=drive_link' }, { name: '2024', url: 'https://drive.google.com/file/d/1SEoO-lnrGPP-K7goG75gsZlHiK1wBmf9/view?usp=sharing' }, { name: '2023', url: 'https://drive.google.com/file/d/1kuKfs6dEMMKbTDIq93kIZdYDkB1zFtlh/view?usp=drive_link' }, { name: '2022', url: 'https://drive.google.com/file/d/1kprHBrLUpotVzn1G1spFc0hpoIxFVorM/view?usp=drive_link' }, { name: '2021', url: 'https://drive.google.com/file/d/1kkMbEimMxdIEKVnSR3V_WQLUhyQLA066/view?usp=drive_link' }, { name: '2020', url: 'https://drive.google.com/file/d/1kT8JgYqpvnj30snAiKGjIoXcFgh6nwva/view?usp=sharing' }] },
                { id: 'illustrator', name: 'Illustrator', desc: 'Vector graphics and illustration', img: 'https://upload.wikimedia.org/wikipedia/commons/f/fb/Adobe_Illustrator_CC_icon.svg', versions: [{ name: '2025', url: 'https://drive.google.com/file/d/1ZNajSGAaCaKtcQwESEEKcvA6xTjaXuWm/view?usp=drive_link' }, { name: '2023', url: 'https://drive.google.com/file/d/1l8qS2J0lGnZ0bd5HnW4n3iTrpHfuW3sk/view?usp=drive_link' }, { name: '2022', url: 'https://drive.google.com/file/d/1kx9dU7yV1IpdWlTypA2FZbPjNwKuP7Od/view?usp=drive_link' }, { name: '2021', url: 'https://drive.google.com/file/d/1lAtoWxBQm7SdiZULyAD2YzeoAs00kY8-/view?usp=drive_link' }, { name: '2020', url: 'https://drive.google.com/file/d/1lBrgwAWTQaaCQodJR7rtCpbEumI0wwQb/view?usp=drive_link' }] },
                { id: 'media-encoder', name: 'Media Encoder', desc: 'Rendering and transcoding', img: 'https://www.adobe.com/content/dam/acom/one-console/icons_rebrand/me_appicon.svg', versions: [{ name: '2025', url: 'https://drive.google.com/file/d/1plG-0BWg4zZNYJkyDd2tHakYIXO1vzVx/view?usp=sharing' }, { name: '2024', url: 'https://drive.google.com/file/d/1zHoJ6smv4H_OE2O2P39s1wj7LhIX3OTZ/view?usp=sharing' }, { name: '2023', url: 'https://drive.google.com/file/d/1Az9LBu1pBPaJ5xZoS39wsMfRaNnAz2pZ/view?usp=sharing' }, { name: '2022', url: 'https://drive.google.com/file/d/1rAbr8DRL5W3wFzyRnVohVwByOIw4agxm/view?usp=sharing' }, { name: '2021', url: 'https://drive.google.com/file/d/1Fv3-fK_3vJje6feWKq2dUjZbzE4ofxEV/view?usp=sharing' }, { name: '2020', url: 'https://drive.google.com/file/d/1o53VIZQsswD0de3FusXHlVJ8qwPM7dVZ/view?usp=sharing' }] }
            ],
            plugins: [
                { id: 'sapphire', name: 'Sapphire Suite', desc: 'Industry-standard VFX plugins.', img: 'assets/sap.png', versions: [{ name: 'Sapphire 2024.5', url: '#' }, { name: 'Sapphire 2023.1', url: '#' }] },
                { id: 'bcc', name: 'BCC Suite', desc: 'Comprehensive visual effects.', img: 'assets/cc.png', versions: [{ name: 'Continuum 2022', url: 'https://drive.google.com/file/d/1k287dnhedu9NDOFJy852Why7YxU-2gQO/view?usp=sharing' }] },
                { id: 'magic-bullet', name: 'Magic Bullet Suite', desc: 'Professional color correction tools.', img: 'assets/mb.png', versions: [{ name: 'Magic Bullet 2024', url: 'https://drive.google.com/file/d/1-9qeNipVsdnZ_oR7jQOmevMsArS6iAw1/view?usp=sharing' }] },
                { id: 'shooter-suite', name: 'Shooter Suite', desc: 'Footage prep and delivery tools.', img: 'assets/rg-ss.png', versions: [{ name: 'Shooter Suite 13.1.14', url: 'https://drive.google.com/file/d/1npLp5qHObSe1_PfLMcJF_M3Ta1phMlIc/view?usp=sharing' }] },
                { id: 'vfx-suite', name: 'VFX Suite', desc: 'Keying, tracking, and cleanup.', img: 'assets/vs.png', versions: [{ name: 'VFX Suite 2024', url: 'https://drive.google.com/file/d/1CZm5HASlt1L5pasFOzcN3o_6-b3hq4cz/view?usp=sharing' }] },
                { id: 'element-3d', name: 'Element 3D', desc: 'Advanced 3D render engine.', img: 'assets/e3d.png', versions: [{ name: 'Element 3D v2.2', url: 'https://drive.google.com/file/d/1WzYQHhGlff3P0y9fAl07n1zh2-CRjEjG/view?usp=sharing' }] },
                { id: 'saber', name: 'Saber', desc: 'High-energy beams and effects.', img: 'assets/sab.png', versions: [{ name: 'Saber 1.0.40', url: 'https://drive.google.com/file/d/1cGvMi3f2QOuoQGQnG85x4abfWwvjoUe4/view?usp=sharing' }] },
                { id: 'rsmb', name: 'RSMB', desc: 'ReelSmart Motion Blur.', img: 'assets/rsmb.png', versions: [{ name: 'RSMB Pro', url: 'https://drive.google.com/file/d/1TU1buI7GXPi_i4jzm5FmyEK8nLlgSnXN/view?usp=sharing' }] },
                { id: 'fx-console', name: 'FX Console', desc: 'Workflow utility for effects.', img: 'assets/fxc.png', versions: [{ name: 'FX Console 1.0.5', url: 'https://www.videocopilot.net/tutorials/fx_console_plugin/' }] },
                { id: 'trapcode-suite', name: 'Trapcode Suite', desc: '3D motion graphics and VFX.', img: 'assets/rg-ts.png', versions: [{ name: 'Trapcode 2023', url: 'https://drive.google.com/file/d/18mMCxWpuVlSREN4smoYtJcn_OVrZGObf/view?usp=sharing' }] },
                { id: 'optical-flares', name: 'Optical Flares', desc: 'Realistic lens flare generator.', img: 'assets/VC-ofpng.png', versions: [{ name: 'Optical Flares v1.3.8', url: 'https://drive.google.com/file/d/1fo9vT2qCfM0fcUioEfTrAD3ZXlCK6m-C/view?usp=sharing' }] },
                { id: 'twixtor-pro', name: 'Twixtor Pro', desc: 'Intelligent slow-motion.', img: 'assets/twxt.png', versions: [{ name: 'Twixtor Pro v7.3.0', url: 'https://drive.google.com/file/d/1pn1h9Mch_xLgFLfgKnh5VYVGa-HqY367/view?usp=drive_link' }] },
                { id: 'red-giant-universe', name: 'Red Giant Universe', desc: 'Effects and transitions library.', img: 'assets/rgu.png', versions: [{ name: 'RG Universe 2024', url: 'https://drive.google.com/file/d/1-EjzbWk-fwnhaGsaBd6LSDdquZI4GVQC/view?usp=sharing' }] },
                { id: 'shadow-studio-3', name: 'Shadow Studio 3', desc: 'Realistic shadow generator.', img: 'assets/ss3.png', versions: [{ name: 'Shadow Studio 3 v1.0.5', url: 'https://drive.google.com/file/d/1QuRTtfrn0Q3wzB0fdN3G2BpAK1LZaDuw/view?usp=drive_link' }] },
                { id: 'deep-glow', name: 'Deep Glow', desc: 'Physically accurate glows.', img: 'assets/dg.jpg', versions: [{ name: 'DeepGlow 1.2', url: 'https://drive.google.com/drive/folders/1RuryQ6dG6b-M2C6hwlwkTEoEKXxcLsOd?usp=sharing' }, { name: 'DeepGlow 2', url: '#' }] },
            ],
            scripts: [
                { id: 'motion-bro', name: 'Motion Bro', desc: 'The most popular extension for presets.', img: 'assets/motion_bro.png', versions: [{ name: 'For Ae 2021 Above', url: 'https://drive.google.com/file/d/1PI17qpqrlwJZrl8Jyj6R6Dl5MzG6_X9C/view?usp=sharing' }] },
                { id: 'flow', name: 'Flow', desc: 'Easy animation curve control.', img: 'assets/flow.png', versions: [{ name: 'v1.5.2', url: 'https://drive.google.com/file/d/134dY8lo2HOJzCe_UJgh16IvDXzcPDih_/view?usp=drive_link' }] },
                { id: 'geolayers', name: 'GEOlayers 3', desc: 'Map animation and data visualization.', img: 'assets/geolayers3.jpg', versions: [{ name: 'GEOlayers 3', url: '#' }] },
                { id: 'jerryflow-v2', name: 'JerryFlow V2', desc: 'The ultimate extension for After Effects', img: 'assets/JerryFlow_v2.png', versions: [{ name: 'JerryFlow V2.0.0', url: 'https://drive.google.com/file/d/1SawuVL0m85aSRbEAtuxiuzJw4MDewfpK/view?usp=sharing' }] },
                { id: 'atomx', name: 'AtomX', desc: 'Extension for motion graphics packages.', img: 'assets/atom_x.jpg', versions: [{ name: 'v3.9.0', url: 'https://drive.google.com/file/d/198oG7orNkjGYuB34uHWKEzFkhwhZTJQl/view?usp=sharing' }] },
                { id: 'keystone', name: 'Keystone', desc: 'Easy layer alignment & distribution.', img: 'assets/keystone.jpg', versions: [{ name: 'v1.1.6', url: 'https://drive.google.com/drive/folders/1Ykjk5fe8Nxi-xBqqFUeM3WvllgDru37A?usp=sharing' }] }
            ],
            utilities: [
                { id: 'topaz-ai', name: 'Topaz AI Suite', desc: 'AI-powered image & video enhancement.', img: 'https://cdn.prod.website-files.com/6005fac27a49a9cd477afb63/634d1e4a5cb8ac88fd07a065_1024.svg', versions: [{ name: 'Version 2.6.0', url: 'https://drive.google.com/file/d/1C-NrR-6ipfKIM06Moyy17EocvuJon6hQ/view?usp=sharing' }] },
                { id: 'filmora-14', name: 'Filmora 14', desc: 'AI-powered efficiency and simplicity.', img: 'https://neveragain.allstatics.com/2019/assets/icon/logo/filmora-square.svg', versions: [{ name: 'v14.0.11.9772', url: 'https://drive.google.com/file/d/1--ITgkydgZQNKz0S0zoEJItEVxrIgsuv/view?usp=drivesdk' }] },
                { id: 'idm', name: 'IDM (Cracked)', desc: 'Internet Download Manager.', img: 'https://cdn6.aptoide.com/imgs/9/c/6/9c688656c4d6227589d5fe3b68e038d2_icon.png?w=128', versions: [{ name: 'Version 20.4', url: '#' }] }
            ]
        };

        let camera, scene, renderer, controls, labelRenderer;
        let galaxyContainer, detailModal, modalContent, closeModalBtn, hudReticle, hudReticleName;
        const clock = new THREE.Clock();
        const textureLoader = new THREE.TextureLoader();
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        
        const galaxyPositions = {};
        const clickableObjects = [];
        let isTraveling = false;
        let audioInitialized = false;
        const sounds = {};
        let comet;

        function init() {
            setupDOM();
            init3D();
            initAudio();
            createGalacticAtlas();
            startStardateClock();
            
            gsap.to('#loading-screen', { opacity: 0, duration: 1, delay: 1, onComplete: () => {
                document.getElementById('loading-screen').style.display = 'none';
            }});
            
            // CRITICAL FIX: Start the animation loop.
            animate();
        }

        function setupDOM() {
            galaxyContainer = document.getElementById('galaxy-container');
            detailModal = document.getElementById('detail-modal');
            modalContent = document.getElementById('modal-content');
            closeModalBtn = document.getElementById('close-modal');
            hudReticle = document.getElementById('hud-reticle');
            hudReticleName = document.getElementById('hud-reticle-name');
            
            document.getElementById('enter-orb').addEventListener('click', () => {
                if (!audioInitialized) {
                    Tone.start();
                    audioInitialized = true;
                    sounds.ambient.start();
                }
                document.getElementById('landing-screen').classList.add('hidden');
                document.getElementById('galaxy-container').classList.add('visible');
            });

            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    if (isTraveling || btn.classList.contains('active')) return;
                    sounds.uiClick.triggerAttackRelease("C5", "8n");
                    const galaxyId = btn.dataset.galaxy;
                    travelToGalaxy(galaxyId);
                });
            });
            
            closeModalBtn.addEventListener('click', () => {
                sounds.modalClose.triggerAttackRelease("0.1");
                hideDetailModal();
            });
        }

        function initAudio() {
             sounds.ambient = new Tone.Noise('brown').set({ volume: -35, fadeIn: 2 }).toDestination();
             sounds.uiClick = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.001, decay: 0.1, sustain: 0, release: 0.1 } }).toDestination();
             sounds.warpEngage = new Tone.NoiseSynth({ noise: { type: 'brown' }, envelope: { attack: 1, decay: 1, sustain: 0.2, release: 0.5 } }).toDestination();
             sounds.warpWhoosh = new Tone.NoiseSynth({ noise: { type: 'white' }, envelope: { attack: 0.01, decay: 0.5, sustain: 0, release: 0.2 } }).toDestination();
             sounds.modalOpen = new Tone.NoiseSynth({ volume: -20, noise: { type: 'white' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0, release: 0.1 } }).toDestination();
             sounds.modalClose = new Tone.NoiseSynth({ volume: -20, noise: { type: 'pink' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0, release: 0.1 } }).toDestination();
        }

        function init3D() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 50000);
            camera.position.set(0, 300, 1800);

            const canvas = document.getElementById('galaxy-canvas');
            renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x000000, 0);

            labelRenderer = new CSS2DRenderer();
            labelRenderer.setSize(window.innerWidth, window.innerHeight);
            labelRenderer.domElement.style.position = 'absolute';
            labelRenderer.domElement.style.top = '0px';
            labelRenderer.domElement.style.pointerEvents = 'none';
            galaxyContainer.appendChild(labelRenderer.domElement);
            
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.minDistance = 200;
            controls.maxDistance = 4000;
            controls.autoRotate = true;
            controls.autoRotateSpeed = 0.08;

            scene.add(new THREE.AmbientLight(0xffffff, 0.4));

            createStarfield();
            createWarpParticles();
            createComet();

            window.addEventListener('resize', onWindowResize);
            canvas.addEventListener('click', onClick);
            window.addEventListener('mousemove', onMouseMove);
        }
        
        function createStarfield() {
            const starGeo = new THREE.BufferGeometry();
            const vertices = [];
            for (let i = 0; i < 50000; i++) {
                vertices.push( THREE.MathUtils.randFloatSpread(25000), THREE.MathUtils.randFloatSpread(25000), THREE.MathUtils.randFloatSpread(25000) );
            }
            starGeo.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
            const starMat = new THREE.PointsMaterial({ color: 0xaaaaaa, size: 4 });
            const stars = new THREE.Points(starGeo, starMat);
            scene.add(stars);

            const nebulaTex = textureLoader.load('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/lava/cloud.png');
            nebulaTex.wrapS = nebulaTex.wrapT = THREE.RepeatWrapping;
            for (let i = 0; i < 2; i++) {
                const plane = new THREE.Mesh( new THREE.PlaneGeometry(5000, 5000), new THREE.MeshBasicMaterial({ map: nebulaTex, blending: THREE.AdditiveBlending, transparent: true, opacity: 0.15, depthWrite: false, color: i === 0 ? 0x4060ff : 0xff4080 }) );
                plane.position.set( THREE.MathUtils.randFloatSpread(10000), THREE.MathUtils.randFloatSpread(10000), -10000 );
                plane.rotation.z = Math.random() * Math.PI;
                scene.add(plane);
            }
        }

        let warpParticles;
        function createWarpParticles() {
            const geo = new THREE.BufferGeometry();
            const vertices = [];
            for (let i = 0; i < 500; i++) {
                vertices.push( THREE.MathUtils.randFloatSpread(2000), THREE.MathUtils.randFloatSpread(2000), THREE.MathUtils.randFloatSpread(2000) );
            }
            geo.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
            const mat = new THREE.PointsMaterial({ color: 0xffffff, size: 15, map: new THREE.TextureLoader().load("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 100'%3E%3Crect width='10' height='100' fill='white'/%3E%3C/svg%3E"), blending: THREE.AdditiveBlending, transparent: true, opacity: 0, depthWrite: false });
            warpParticles = new THREE.Points(geo, mat);
            scene.add(warpParticles);
        }
        
        function createComet() {
            const head = new THREE.Mesh(new THREE.SphereGeometry(10, 16, 16), new THREE.MeshBasicMaterial({color: 0xaaddff}));
            const tailGeo = new THREE.ConeGeometry(15, 200, 8);
            const tailMat = new THREE.MeshBasicMaterial({ color: 0x66aaff, transparent: true, opacity: 0.3, blending: THREE.AdditiveBlending });
            const tail = new THREE.Mesh(tailGeo, tailMat);
            tail.position.z = 100;
            tail.rotation.x = Math.PI / 2;
            comet = new THREE.Group();
            comet.add(head);
            comet.add(tail);
            comet.position.set(15000, 15000, 15000);
            scene.add(comet);
        }

        const createGalaxy = (items, centerData, systemPosition, itemSize, hue) => {
             const galaxyContainer = new THREE.Object3D();
             galaxyContainer.position.copy(systemPosition);
             galaxyContainer.userData.id = centerData.id;
             galaxyPositions[centerData.id] = systemPosition;
             scene.add(galaxyContainer);

             const sunLight = new THREE.PointLight(new THREE.Color(`hsl(${hue}, 100%, 60%)`), 2, 8000);
             galaxyContainer.add(sunLight);
             
             const sunGroup = createInteractiveSprite(centerData, itemSize * 2);
             galaxyContainer.add(sunGroup);

             const baseRadius = 150;
             const radiusIncrement = 80;

             items.forEach((item, i) => {
                const orbitRadius = baseRadius + (i * radiusIncrement);
                const orbitContainer = new THREE.Object3D();
                orbitContainer.userData.speed = (0.05 + (0.05 / (i + 1))) * (0.8 + Math.random() * 0.4);
                orbitContainer.rotation.y = Math.random() * Math.PI * 2;
                galaxyContainer.add(orbitContainer);

                const planetGroup = createInteractiveSprite(item, itemSize);
                planetGroup.position.x = orbitRadius;
                orbitContainer.add(planetGroup);
             });
             return galaxyContainer;
        };
        
        const createInteractiveSprite = (itemData, size) => {
            const group = new THREE.Group();
            const map = textureLoader.load(itemData.img, (texture) => { texture.colorSpace = THREE.SRGBColorSpace; });
            const material = new THREE.SpriteMaterial({ map: map, transparent: true, sizeAttenuation: true });
            const sprite = new THREE.Sprite(material);
            sprite.scale.set(size, size, size);
            
            const clickTarget = new THREE.Mesh(
                new THREE.SphereGeometry(size * 0.7, 8, 8),
                new THREE.MeshBasicMaterial({ transparent: true, opacity: 0, depthWrite: false })
            );
            clickTarget.userData.itemData = itemData;
            group.add(sprite);
            group.add(clickTarget);
            clickableObjects.push(clickTarget);

            const labelDiv = document.createElement('div');
            labelDiv.className = 'label';
            labelDiv.textContent = itemData.name;
            const label = new CSS2DObject(labelDiv);
            label.position.set(0, size * 0.8, 0);
            group.add(label);
            return group;
        };

        function createGalacticAtlas() {
            const distance = 8000;
            createGalaxy(DB.software, {id: 'software', name: 'Software', desc: 'Core Adobe applications for creative professionals.', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Adobe_Creative_Cloud_fr_2022.svg/320px-Adobe_Creative_Cloud_fr_2022.svg.png', versions:[]}, new THREE.Vector3(0, 0, 0), 50, 230);
            createGalaxy(DB.plugins, {id: 'plugins', name: 'Plugins', desc: 'Powerful extensions to enhance your software.', img: 'https://placehold.co/128x128/a855f7/ffffff?text=P', versions:[]}, new THREE.Vector3(distance, 0, 0), 30, 270);
            createGalaxy(DB.scripts, {id: 'scripts', name: 'Scripts', desc: 'Automate tasks and unlock new features.', img: 'https://placehold.co/128x128/34d399/ffffff?text=S', versions:[]}, new THREE.Vector3(-distance, 0, 0), 30, 150);
            createGalaxy(DB.utilities, {id: 'utilities', name: 'Utilities', desc: 'Essential tools for a smoother workflow.', img: 'https://placehold.co/128x128/f59e0b/ffffff?text=U', versions:[]}, new THREE.Vector3(0, 0, distance), 30, 40);
        }
        
        function travelToGalaxy(id) {
            isTraveling = true;
            document.querySelectorAll('.nav-btn').forEach(btn => btn.disabled = true);
            document.querySelector('.nav-btn.active').classList.remove('active');
            document.querySelector(`.nav-btn[data-galaxy="${id}"]`).classList.add('active');

            sounds.warpEngage.triggerAttackRelease("0.5", "+0.5");
            
            const targetPosition = galaxyPositions[id].clone();
            const travelDuration = 3.5;
            
            gsap.to(warpParticles.material, { opacity: 1, duration: 1 });
            gsap.to(camera, { fov: 90, duration: travelDuration / 2, ease: "power2.in", onUpdate: () => camera.updateProjectionMatrix() });

            const targetLookAt = targetPosition.clone();
            const cameraEndPos = targetPosition.clone().add(new THREE.Vector3(0, 300, 1800));

            gsap.to(camera.position, {
                x: cameraEndPos.x, y: cameraEndPos.y, z: cameraEndPos.z,
                duration: travelDuration, ease: "power2.inOut",
                onStart: () => sounds.warpWhoosh.triggerAttackRelease("0.5"),
                onComplete: () => {
                    isTraveling = false;
                    document.querySelectorAll('.nav-btn').forEach(btn => btn.disabled = false);
                    gsap.to(warpParticles.material, { opacity: 0, duration: 1 });
                    gsap.to(camera, { fov: 60, duration: 1, ease: "power2.out", onUpdate: () => camera.updateProjectionMatrix() });
                    controls.target.copy(targetLookAt);
                }
            });
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            labelRenderer.setSize(window.innerWidth, window.innerHeight);
        }

        function onMouseMove(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;
        }

        function onClick(event) {
            if (isTraveling) return;
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(clickableObjects);
            if (intersects.length > 0) {
                const clickedObject = intersects[0].object;
                if (clickedObject.userData.itemData) {
                    sounds.modalOpen.triggerAttackRelease("0.1");
                    showDetailModal(clickedObject.userData.itemData);
                }
            }
        }
        
        function showDetailModal(data) {
            let versionsHTML = data.versions && data.versions.length > 0
                ? `<div class="mt-4 pt-4 border-t border-white/10">
                    <h4 class="text-xl font-bold text-white mb-3">Available Downloads</h4>
                    <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                        ${data.versions.map(v => `<a href="${v.url}" target="_blank" rel="noopener noreferrer" class="text-center gradient-btn text-white font-semibold py-2 px-4 rounded-full text-sm">${v.name}</a>`).join('')}
                    </div>
                   </div>`
                : `<p class="text-gray-400 mt-4">No download links available for this item.</p>`;

            modalContent.innerHTML = `
                <div class="flex flex-col sm:flex-row items-center gap-6">
                     <img src="${data.img}" alt="${data.name}" class="w-32 h-32 rounded-xl object-contain flex-shrink-0 bg-black/20 p-2" onerror="this.src='https://placehold.co/128x128/1e293b/ffffff?text=Error'">
                    <div class="flex-1 text-center sm:text-left">
                        <h3 class="text-3xl font-orbitron font-bold text-white">${data.name}</h3>
                        <p class="text-gray-300 mt-1">${data.desc}</p>
                    </div>
                </div>
                ${versionsHTML}`;
            detailModal.classList.add('visible');
            controls.autoRotate = false;
        }

        function hideDetailModal() {
            detailModal.classList.remove('visible');
            controls.autoRotate = true;
        }

        function updateHUD() {
            if (isTraveling) {
                hudReticle.classList.remove('visible');
                return;
            }
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(clickableObjects);

            if (intersects.length > 0) {
                const hoveredObject = intersects[0].object;
                if (hoveredObject.userData.itemData) {
                    const pos = hoveredObject.getWorldPosition(new THREE.Vector3()).project(camera);
                    hudReticle.style.left = `${(pos.x * 0.5 + 0.5) * window.innerWidth}px`;
                    hudReticle.style.top = `${(-pos.y * 0.5 + 0.5) * window.innerHeight}px`;
                    hudReticleName.textContent = hoveredObject.userData.itemData.name;
                    hudReticle.classList.add('visible');
                } else {
                    hudReticle.classList.remove('visible');
                }
            } else {
                hudReticle.classList.remove('visible');
            }
        }
        
        function updateComet(delta) {
            comet.position.x -= 25 * delta;
            comet.position.y -= 25 * delta;
            if (comet.position.x < -15000) {
                comet.position.set(15000, 15000, 15000);
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            const delta = clock.getDelta();
            
            scene.traverse(obj => {
                if (obj.userData.speed) obj.rotation.y += obj.userData.speed * delta;
            });

            if(!isTraveling) controls.update();
            updateHUD();
            updateComet(delta);

            renderer.render(scene, camera);
            labelRenderer.render(scene, camera);
        }
        
        function startStardateClock() {
            const timeEl = document.getElementById('stardate-time');
            const dateEl = document.getElementById('stardate-date');
            
            function updateClock() {
                const now = new Date();
                const fixedDate = new Date('2025-10-03T00:00:00.000Z');
                fixedDate.setHours(now.getHours(), now.getMinutes(), now.getSeconds());

                const optionsTime = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true, timeZone: 'Asia/Kolkata' };
                const optionsDate = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', timeZone: 'Asia/Kolkata' };

                timeEl.textContent = fixedDate.toLocaleTimeString('en-US', optionsTime);
                dateEl.textContent = fixedDate.toLocaleDateString('en-US', optionsDate) + ' | Patna, India';
            }
            setInterval(updateClock, 1000);
            updateClock();
        }

        document.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>

